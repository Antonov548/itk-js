<html>

        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
            <title>itkjs</title>
            <script src="ImageStack.js"></script>
            <script>
                var imageStack = null;
                
                var printImageStackInfo = function() {
                  if (!imageStack) {
                    console.log("Image stack is not initialized");
                    return;
                  }
                  var sizeInRam = imageStack.getDimensions(0) * imageStack.getDimensions(1) * imageStack.getDimensions(2) * imageStack.getComponentSize();
                  console.log("Image stack occupies " + sizeInRam + " bytes");         
                }
                
                var self = this;
            
                document.addEventListener('DOMContentLoaded', function () {
                    Module.Info();
                    
                    var builder = new Module.ImageStackBuilder();
                    builder.onLoadingProgress(function(id, bytes_loaded, bytes_total) { console.log("  [" + id + "]: " + bytes_loaded + " of " + bytes_total + " bytes loaded"); });
                    builder.onDecodingProgress(function(frames_loaded, frames_total) { console.log("  frame decoded (" + frames_total + " total)"); });
                    builder.loadDataAsync(
                      "12bit_images.ihdr",
                      "12bit_images.hevc",
                      function(imageStack) {
                        console.log("SUCCEEDED.");
                        self.imageStack = imageStack;
                        self.printImageStackInfo();
                      },
                      function(description) {
                        console.log("FAILED: " + description);
                      },
                      function(description) {
                        console.log("Status: " + description);
                      });
                });
            </script>
        </head>

        <body>
            <h1>itjs</h1>
        </body>

</html>
